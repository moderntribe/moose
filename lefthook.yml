# Lefthook git hooks
# Refer for explanation to following link:
# https://github.com/evilmartians/lefthook/blob/master/docs/full_guide.md

# only show errors
skip_output:
  - meta
  - success
  - summary

# code linting
pre-commit:
  parallel: true
  commands:
    phpcs:
      run: composer run phpcs
    phpstan:
      run: composer run phpstan
    lintjs:
      run: npm run lint:js
    lintconfigs:
      run: npm run lint:configs
    lintpkgjson:
      run: npm run lint:pkg-json
  jobs:
    - name: lintcss
      run: wp-scripts lint-style {staged_files} --fix
      glob:
        - "\"$npm_package_config_coreThemeDir/**/*.pcss\""
      stage_fixed: true


# prefix with jira ticket
prepare-commit-msg:
  scripts:
    "prefix-with-jira-ticket.php":
      runner: php
